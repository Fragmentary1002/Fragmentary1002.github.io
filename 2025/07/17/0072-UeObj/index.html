<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>unity2UE(正在更新) | 零の領域</title><meta name="author" content="Fragmentary"><meta name="copyright" content="Fragmentary"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="_哔哩哔哩_bilibili 接下来每一章可能抽取一部分观看，后续再进行补充    章节序号 章节名 进度 备注    1 介绍 2&#x2F;2    2 创建多人游戏插件 0&#x2F;23 等学习到网络回头写   3 创建项目 10&#x2F;14 只有10节课   4 武器 2&#x2F;24    插件编写（待）这边我先开盖即用插件 Play设置编译模式   模式 用途描述 编译特点 文件&#x2F;性能特点    DebugGame">
<meta property="og:type" content="article">
<meta property="og:title" content="unity2UE(正在更新)">
<meta property="og:url" content="http://example.com/2025/07/17/0072-UeObj/index.html">
<meta property="og:site_name" content="零の領域">
<meta property="og:description" content="_哔哩哔哩_bilibili 接下来每一章可能抽取一部分观看，后续再进行补充    章节序号 章节名 进度 备注    1 介绍 2&#x2F;2    2 创建多人游戏插件 0&#x2F;23 等学习到网络回头写   3 创建项目 10&#x2F;14 只有10节课   4 武器 2&#x2F;24    插件编写（待）这边我先开盖即用插件 Play设置编译模式   模式 用途描述 编译特点 文件&#x2F;性能特点    DebugGame">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/p_66349124.png">
<meta property="article:published_time" content="2025-07-17T01:16:49.000Z">
<meta property="article:modified_time" content="2025-07-28T17:24:20.945Z">
<meta property="article:author" content="Fragmentary">
<meta property="article:tag" content="ue">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/p_66349124.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2025/07/17/0072-UeObj/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'unity2UE(正在更新)',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-07-29 01:24:20'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/./img/pixiv_cat.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">73</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">33</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></div><div class="menus_item"><a class="site-page" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/p_66349124.png')"><nav id="nav"><span id="blog-info"><a href="/" title="零の領域"><span class="site-name">零の領域</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></div><div class="menus_item"><a class="site-page" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">unity2UE(正在更新)</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-07-17T01:16:49.000Z" title="发表于 2025-07-17 09:16:49">2025-07-17</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-07-28T17:24:20.945Z" title="更新于 2025-07-29 01:24:20">2025-07-29</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/ue/">ue</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="unity2UE(正在更新)"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1AN4y1f745?spm_id_from=333.788.player.switch&vd_source=d19e47552f1614194f0d0b0662850083&p=2">_哔哩哔哩_bilibili</a></p>
<p>接下来每一章可能抽取一部分观看，后续再进行补充</p>
<table>
<thead>
<tr>
<th>章节序号</th>
<th>章节名</th>
<th>进度</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>介绍</td>
<td>2/2</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>创建多人游戏插件</td>
<td>0/23</td>
<td>等学习到网络回头写</td>
</tr>
<tr>
<td>3</td>
<td>创建项目</td>
<td>10/14</td>
<td>只有10节课</td>
</tr>
<tr>
<td>4</td>
<td>武器</td>
<td>2/24</td>
<td></td>
</tr>
</tbody></table>
<h1 id="插件编写（待）"><a href="#插件编写（待）" class="headerlink" title="插件编写（待）"></a>插件编写（待）</h1><p>这边我先开盖即用插件</p>
<h2 id="Play设置"><a href="#Play设置" class="headerlink" title="Play设置"></a>Play设置</h2><h3 id="编译模式"><a href="#编译模式" class="headerlink" title="编译模式"></a>编译模式</h3><table>
<thead>
<tr>
<th>模式</th>
<th>用途描述</th>
<th>编译特点</th>
<th>文件/性能特点</th>
</tr>
</thead>
<tbody><tr>
<td><strong>DebugGame</strong></td>
<td>开发过程中进行调试。在游戏中设置断点、查看变量值以及代码调试。</td>
<td>以调试模式编译，包含调试符号（debug symbols）。</td>
<td>可执行文件较大且运行速度较慢。</td>
</tr>
<tr>
<td><strong>Development</strong></td>
<td>开发过程中进行内部测试和验证。相比DebugGame模式会进行更多优化，同时保留调试能力。</td>
<td>启用优化选项以提高运行性能，保留部分调试信息。</td>
<td>运行性能更高，但仍便于问题排查。</td>
</tr>
<tr>
<td><strong>DebugGame Editor</strong></td>
<td>在Unreal Editor中调试游戏功能（与DebugGame模式类似，但专用于编辑器环境）。</td>
<td>编译包含调试符号，便于在编辑器中调试。</td>
<td>可执行文件较大，运行效率较低。</td>
</tr>
<tr>
<td><strong>Development Editor</strong></td>
<td>在Unreal Editor中进行开发测试。优化编辑器运行性能，同时保留调试能力（与Development模式类似）。</td>
<td>启用优化选项提高编辑器性能，保留部分调试信息。</td>
<td>编辑器运行更流畅，同时支持问题排查。</td>
</tr>
<tr>
<td><strong>Shipping</strong></td>
<td>发布给玩家的正式版本构建。</td>
<td>全面优化编译，移除所有调试符号和调试信息。</td>
<td>可执行文件最小化，运行性能最高（无调试开销）。</td>
</tr>
</tbody></table>
<h3 id="网络模式（ENetMode）"><a href="#网络模式（ENetMode）" class="headerlink" title="网络模式（ENetMode）"></a>网络模式（ENetMode）</h3><h2 id="更新插件代码"><a href="#更新插件代码" class="headerlink" title="更新插件代码"></a>更新插件代码</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原弃用代码：bIsFocusable = true;</span></span><br><span class="line"><span class="built_in">SetIsFocusable</span>(<span class="literal">true</span>); <span class="comment">// 使用UE5官方Setter方法[1,3](@ref)</span></span><br></pre></td></tr></table></figure>



<h1 id="基础3C"><a href="#基础3C" class="headerlink" title="基础3C"></a>基础3C</h1><h2 id="项目建立"><a href="#项目建立" class="headerlink" title="项目建立"></a>项目建立</h2><ul>
<li>编译项目<ul>
<li>装入自定义网络插件</li>
<li>装入Online SubSystem Steam</li>
<li>设置ini：</li>
</ul>
</li>
</ul>
<p>在DefaultEngine.ini写入</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[/Script/Engine.GameEngine]</span></span><br><span class="line">+<span class="attr">NetDriverDefinitions</span>=(DefName=<span class="string">&quot;GameNetDriver&quot;</span>,DriverClassName=<span class="string">&quot;OnlineSubsystemSteam.SteamNetDriver&quot;</span>,DriverClassNameFallback=<span class="string">&quot;OnlineSubsystemUtils.IpNetDriver&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="section">[OnlineSubsystem]</span></span><br><span class="line"><span class="attr">DefaultPlatformService</span>=Steam</span><br><span class="line"></span><br><span class="line"><span class="section">[OnlineSubsystemSteam]</span></span><br><span class="line"><span class="attr">bEnabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">SteamDevAppId</span>=<span class="number">480</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; If using Sessions</span></span><br><span class="line"><span class="comment">; bInitServerOnClient=true</span></span><br><span class="line"></span><br><span class="line"><span class="section">[/Script/OnlineSubsystemSteam.SteamNetDriver]</span></span><br><span class="line"><span class="attr">NetConnectionClassName</span>=<span class="string">&quot;OnlineSubsystemSteam.SteamNetConnection&quot;</span></span><br></pre></td></tr></table></figure>

<p>在DefaultGame.ini写入</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[/Script/Engine.GameSession]</span></span><br><span class="line"><span class="attr">MaxPlayers</span>=<span class="number">4</span></span><br></pre></td></tr></table></figure>

<p>删除二进制文件夹</p>
<ul>
<li><p>创建关卡</p>
<ul>
<li>创建StartUpMap，LobbyMap</li>
<li>在Project Setting - Map&amp;Modes - 里面更换默认的Map</li>
<li>在StartUpMap关卡蓝图里面调用Create WBP Menu widget -&gt; Menu Setup （设置Lobby路径）</li>
</ul>
</li>
<li><p>Bulid</p>
<ul>
<li>设置bulid的map : 在Project Setting - 搜索 maps to 设置俩个关卡</li>
<li>平台-打包-windows-放入新建的build文件夹</li>
</ul>
</li>
</ul>
<h2 id="建立网络连接"><a href="#建立网络连接" class="headerlink" title="建立网络连接"></a>建立网络连接</h2><ul>
<li>在内容浏览器里面ADD 第三人称资产<ul>
<li>重点概念 <strong>input</strong> （待定)</li>
</ul>
</li>
<li>GameMode设置第三人称 -<ul>
<li>重点概念<strong>GameMode</strong> -&gt; <a target="_blank" rel="noopener" href="https://dev.epicgames.com/documentation/zh-cn/unreal-engine/game-mode-and-game-state-in-unreal-engine#agamemodebase">虚幻引擎中的 Game Mode 和 Game State | 虚幻引擎 5.6 文档 | Epic Developer Community</a></li>
</ul>
</li>
</ul>
<h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><p><a target="_blank" rel="noopener" href="https://www.mixamo.com/">Maximo</a></p>
<p><strong>重定向</strong>（待定）<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1AN4y1f745/?spm_id_from=333.788.player.switch&vd_source=d19e47552f1614194f0d0b0662850083&p=32">重定向教程</a></p>
<h2 id="3C"><a href="#3C" class="headerlink" title="3C"></a>3C</h2><h3 id="Character"><a href="#Character" class="headerlink" title="Character"></a>Character</h3><p>新建一个cpp类 注意 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;FCharacter.h&quot;</span><br></pre></td></tr></table></figure>

<p>头文件path要对，新建立的时候默认h会错误</p>
<p>每次更新都 ====在编辑器或游戏窗口中按下 **<code>Ctrl + Alt + F11</code>**，强制终止当前 Live Coding 进程，释放资源后重新编译</p>
<p>C++类创建蓝图 并且设置Mesh和pos</p>
<h3 id="Camera"><a href="#Camera" class="headerlink" title="Camera"></a>Camera</h3><p>FCharacter</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">	</span><br><span class="line">FCharacter.<span class="function">h</span></span><br><span class="line"><span class="function">	<span class="title">UPROPERTY</span><span class="params">(VisibleAnyWhere, Category = Camera)</span></span></span><br><span class="line"><span class="function">	<span class="keyword">class</span> USpringArmComponent* CameraBoom</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(VisibleAnyWhere, Category = Camera)</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">UCameraComponent</span>* FollowCamera;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">FCharacter.<span class="function">cpp</span></span><br><span class="line"><span class="function"><span class="title">AFCharacter::AFCharacter</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> 	<span class="comment">// Set this character to call Tick() every frame.  You can turn this off to improve performance if you don&#x27;t need it.</span></span><br><span class="line">	PrimaryActorTick.bCanEverTick = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    CameraBoom = <span class="built_in">CreateDefaultSubobject</span>&lt;USpringArmComponent&gt;(<span class="built_in">TEXT</span>(<span class="string">&quot;CameraBoom&quot;</span>));</span><br><span class="line">    CameraBoom-&gt;<span class="built_in">SetupAttachment</span>(RootComponent);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 设置弹簧臂长度（摄像机与角色的默认距离）</span></span><br><span class="line">    CameraBoom-&gt;TargetArmLength = <span class="number">500.f</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 启用角色旋转控制弹簧臂  当玩家控制器旋转时，弹簧臂同步旋转（适用于第三人称视角） </span></span><br><span class="line">    CameraBoom-&gt;bUsePawnControlRotation = <span class="literal">true</span>;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    FollowCamera = <span class="built_in">CreateDefaultSubobject</span>&lt;UCameraComponent&gt;(<span class="built_in">TEXT</span>(<span class="string">&quot;Camera&quot;</span>));</span><br><span class="line">    FollowCamera-&gt;<span class="built_in">SetupAttachment</span>(CameraBoom, USpringArmComponent::SocketName);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 设置摄像机的视角控制</span></span><br><span class="line">    FollowCamera-&gt;bUsePawnControlRotation = <span class="literal">false</span>; <span class="comment">// 禁用摄像机的控制器旋转（通常用于第一人称视角）</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Control"><a href="#Control" class="headerlink" title="Control"></a>Control</h3><p>project setting - Engine Input （类似unity Input Manager）</p>
<p>设置人物BP_FCharacter - Pawn - 自动控制玩家 - 选择玩家0</p>
<p>FCharacter</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Called to bind functionality to input</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AFCharacter::SetupPlayerInputComponent</span><span class="params">(UInputComponent* PlayerInputComponent)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Super::<span class="built_in">SetupPlayerInputComponent</span>(PlayerInputComponent);</span><br><span class="line"></span><br><span class="line">    PlayerInputComponent-&gt;<span class="built_in">BindAxis</span>(<span class="string">&quot;MoveForward&quot;</span>, <span class="keyword">this</span>, &amp;AFCharacter::MoveForward);</span><br><span class="line">    PlayerInputComponent-&gt;<span class="built_in">BindAxis</span>(<span class="string">&quot;MoveRight&quot;</span>, <span class="keyword">this</span>, &amp;AFCharacter::MoveRight);</span><br><span class="line">    PlayerInputComponent-&gt;<span class="built_in">BindAxis</span>(<span class="string">&quot;Turn&quot;</span>, <span class="keyword">this</span>, &amp;AFCharacter::Turn);   </span><br><span class="line">    PlayerInputComponent-&gt;<span class="built_in">BindAxis</span>(<span class="string">&quot;LookUp&quot;</span>, <span class="keyword">this</span>, &amp;AFCharacter::LookUp);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AFCharacter::MoveForward</span><span class="params">(<span class="type">float</span> Value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (Controller &amp;&amp; Value != <span class="number">0.0f</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 获取前向向量并应用移动</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 完整控制器旋转（包含俯仰角）</span></span><br><span class="line">        <span class="comment">// const FRotator Rotation = Controller-&gt;GetControlRotation();</span></span><br><span class="line">        <span class="comment">//  仅Yaw方向旋转（锁定水平移动）</span></span><br><span class="line">        <span class="type">const</span> FRotator Rotation = <span class="built_in">FRotator</span>(<span class="number">0.f</span>, Controller-&gt;<span class="built_in">GetControlRotation</span>().Yaw, <span class="number">0.f</span>);</span><br><span class="line">        <span class="type">const</span> FVector Direction = <span class="built_in">FRotationMatrix</span>(Rotation).<span class="built_in">GetScaledAxis</span>(EAxis::X);</span><br><span class="line">        <span class="built_in">AddMovementInput</span>(Direction, Value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AFCharacter::MoveRight</span><span class="params">(<span class="type">float</span> Value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (Controller &amp;&amp; Value != <span class="number">0.0f</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 获取右向向量并应用移动</span></span><br><span class="line">        <span class="comment">// 完整控制器旋转（包含俯仰角）</span></span><br><span class="line">        <span class="comment">// const FRotator Rotation = Controller-&gt;GetControlRotation();</span></span><br><span class="line">        <span class="comment">//  仅Yaw方向旋转（锁定水平移动）</span></span><br><span class="line">        <span class="type">const</span> FRotator Rotation = <span class="built_in">FRotator</span>(<span class="number">0.f</span>, Controller-&gt;<span class="built_in">GetControlRotation</span>().Yaw, <span class="number">0.f</span>);</span><br><span class="line">        <span class="type">const</span> FVector Direction = <span class="built_in">FRotationMatrix</span>(Rotation).<span class="built_in">GetScaledAxis</span>(EAxis::Y);</span><br><span class="line">        <span class="built_in">AddMovementInput</span>(Direction, Value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AFCharacter::Turn</span><span class="params">(<span class="type">float</span> Value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 处理水平旋转输入</span></span><br><span class="line">    <span class="built_in">AddControllerYawInput</span>(Value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AFCharacter::LookUp</span><span class="params">(<span class="type">float</span> Value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 处理垂直旋转输入</span></span><br><span class="line">    <span class="built_in">AddControllerPitchInput</span>(Value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="Anim"><a href="#Anim" class="headerlink" title="Anim"></a>Anim</h3><p>FAnimInstance</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">UFAnimInstance::NativeInitializeAnimation</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 初始化动画实例时调用</span></span><br><span class="line">    Super::<span class="built_in">NativeInitializeAnimation</span>();</span><br><span class="line">    <span class="comment">//尝试获取角色实例</span></span><br><span class="line">    FCharacter = <span class="built_in">Cast</span>&lt;AFCharacter&gt;(<span class="built_in">TryGetPawnOwner</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UFAnimInstance::NativeUpdateAnimation</span><span class="params">(<span class="type">float</span> DeltaSeconds)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 每帧更新动画实例时调用</span></span><br><span class="line">    Super::<span class="built_in">NativeUpdateAnimation</span>(DeltaSeconds);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(FCharacter == <span class="literal">nullptr</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 如果FCharacter为空，尝试获取角色实例</span></span><br><span class="line">        FCharacter = <span class="built_in">Cast</span>&lt;AFCharacter&gt;(<span class="built_in">TryGetPawnOwner</span>());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (FCharacter == <span class="literal">nullptr</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 如果仍然为空，直接返回</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    FVector Velocity = FCharacter-&gt;<span class="built_in">GetVelocity</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 计算角色的速度</span></span><br><span class="line">    <span class="comment">// 忽略垂直分量，通常用于地面移动速度计算</span></span><br><span class="line">    Velocity.Z = <span class="number">0</span>; <span class="comment">// 忽略垂直速度分量</span></span><br><span class="line">    Speed = Velocity.<span class="built_in">Size</span>(); <span class="comment">// 计算速度大小</span></span><br><span class="line"></span><br><span class="line">    bIsInAir= FCharacter-&gt;<span class="built_in">GetMovementComponent</span>()-&gt;<span class="built_in">IsFalling</span>(); <span class="comment">// 检查角色是否在空中</span></span><br><span class="line">    bIsAccelerating = FCharacter-&gt;<span class="built_in">GetCharacterMovement</span>()-&gt;<span class="built_in">GetCurrentAcceleration</span>().<span class="built_in">Size</span>() &gt; <span class="number">0</span>; <span class="comment">// 检查角色是否正在加速</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<ul>
<li><p>动画蓝图创建</p>
<ul>
<li>类设置 - 父类设置为 F Anim Instance</li>
</ul>
</li>
<li><p>创建状态机</p>
<ul>
<li>创建状态</li>
<li>创建连线</li>
<li>创建连线条件</li>
</ul>
</li>
<li><p>创建混合空间（<strong>混合空间1D和混合空间的区别</strong>）<a target="_blank" rel="noopener" href="https://dev.epicgames.com/documentation/zh-cn/unreal-engine/blend-spaces-in-unreal-engine">混合空间 </a></p>
<ul>
<li>放入 Idle Walk Run 三个动画</li>
<li>X轴设置为Speed</li>
<li>放入动画状态机 中 并且输入设置为CPP文件中的Speed </li>
</ul>
</li>
</ul>
<h3 id="修改动画手感与摄像机小优化"><a href="#修改动画手感与摄像机小优化" class="headerlink" title="修改动画手感与摄像机小优化"></a>修改动画手感与摄像机小优化</h3><h4 id="自由摄像机视角"><a href="#自由摄像机视角" class="headerlink" title="自由摄像机视角"></a>自由摄像机视角</h4><ul>
<li>FCharacter.cpp</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//动画后的优化</span></span><br><span class="line">AFCharacter::<span class="built_in">AFCharacter</span>()&#123;</span><br><span class="line">    bUseControllerRotationYaw = <span class="literal">false</span>; <span class="comment">// 禁止控制器偏航旋转</span></span><br><span class="line">	<span class="built_in">GetCharacterMovement</span>()-&gt;bOrientRotationToMovement = <span class="literal">true</span>; <span class="comment">// 角色朝向移动方向</span></span><br><span class="line">&#125;</span><br><span class="line">   </span><br></pre></td></tr></table></figure>

<ul>
<li>BP_FCharacter - 使用控制器旋转Yaw - false</li>
<li>CharMoveComp - 将旋转朝向运动 - true</li>
</ul>
<h4 id="下落bug"><a href="#下落bug" class="headerlink" title="下落bug"></a>下落bug</h4><ul>
<li>下落动画Loop</li>
</ul>
<h2 id="无缝切换"><a href="#无缝切换" class="headerlink" title="无缝切换"></a>无缝切换</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/461787677">(99+ 封私信 / 80 条消息) 关卡系统四、无缝切换 - 知乎</a></p>
<p>对于地图切换（也即关卡切换），UE还提供了无缝切换（Seamless Travel）和非无缝切换（Non-Seamless Travel），无缝切换使用<a target="_blank" rel="noopener" href="https://zhida.zhihu.com/search?content_id=190749537&content_type=Article&match_order=1&q=%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD&zhida_source=entity">异步加载</a>关卡资源，是非阻塞式切换，而非无缝切换即为前面介绍的同步加载关卡资源，是阻塞式切换（<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/461781710">传送门</a>），在网络联机游戏中，无缝切换不会导致网络断开，而非无缝会导致网络断开后重连，UE推荐在网络联机游戏中使用无缝切换，感兴趣可以看看<a href="https://link.zhihu.com/?target=https://docs.unrealengine.com/4.27/zh-CN/InteractiveExperiences/Networking/Travelling/">官方文档</a>（有点晦涩难懂T_T，因此需要深入研究一番）。</p>
<h3 id="GameMode"><a href="#GameMode" class="headerlink" title="GameMode"></a>GameMode</h3><ul>
<li><p>创建FLobbyGameMode</p>
</li>
<li><p>设置Pawn为FCharacter </p>
</li>
<li><p>创建过度关卡</p>
</li>
<li><p>在Project Setting 里面设置过度关卡</p>
</li>
<li><p>在GameMode中设置无缝切换</p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">AFLobbyGameMode::PostLogin</span><span class="params">(APlayerController* NewPlayer)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 调用父类实现，确保基础登录流程完成</span></span><br><span class="line">    Super::<span class="built_in">PostLogin</span>(NewPlayer);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取当前已登录玩家数量（游戏状态中的玩家数组人数）</span></span><br><span class="line">    int32 NumofPlayer = GameState.<span class="built_in">Get</span>()-&gt;PlayerArray.<span class="built_in">Num</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 当有2名玩家登录时，开始游戏</span></span><br><span class="line">    <span class="keyword">if</span>(NumofPlayer == <span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        UWorld* World = <span class="built_in">GetWorld</span>();</span><br><span class="line">        <span class="keyword">if</span>(World)</span><br><span class="line">        &#123;</span><br><span class="line">            bUseSeamlessTravel = <span class="literal">true</span>;  <span class="comment">// 启用无缝切换地图功能</span></span><br><span class="line">            <span class="comment">// 无缝切换到战斗地图（使用监听服务端模式）</span></span><br><span class="line">            World-&gt;<span class="built_in">ServerTravel</span>(<span class="built_in">FString</span>(<span class="string">&quot;/Game/AFMaps/FBattleMap?listen&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="HUD"><a href="#HUD" class="headerlink" title="HUD"></a>HUD</h2><ul>
<li>创建HUD Class</li>
<li>创建WBP继承与HUD Class</li>
<li>在代码中绑定WBP</li>
<li>在FCharacter中设置WBP类以及展示Canvas</li>
<li>在FCharacter蓝图中反射调用UpdateText</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">UFPlayerHUDWidget::SetDisplayText</span><span class="params">(<span class="type">const</span>  FString&amp; TextToDisplay)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (DisplayText)</span><br><span class="line">	&#123;</span><br><span class="line">		DisplayText-&gt;<span class="built_in">SetText</span>(FText::<span class="built_in">FromString</span>(TextToDisplay));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UFPlayerHUDWidget::UpdateHUD</span><span class="params">(APawn* InPawn)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	ENetRole RemoteRole = InPawn-&gt;<span class="built_in">GetRemoteRole</span>();</span><br><span class="line">	FString Role;</span><br><span class="line">	<span class="keyword">switch</span> (RemoteRole)</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="keyword">case</span> ENetRole::ROLE_Authority:</span><br><span class="line">		Role = <span class="built_in">FString</span>(<span class="string">&quot;Authority&quot;</span>);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> ENetRole::ROLE_AutonomousProxy:</span><br><span class="line">		Role = <span class="built_in">FString</span>(<span class="string">&quot;Autonomous Proxy&quot;</span>);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> ENetRole::ROLE_SimulatedProxy:</span><br><span class="line">		Role = <span class="built_in">FString</span>(<span class="string">&quot;Simulated Proxy&quot;</span>);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> ENetRole::ROLE_None:</span><br><span class="line">		Role = <span class="built_in">FString</span>(<span class="string">&quot;None&quot;</span>);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	FString RemoteRoleString = FString::<span class="built_in">Printf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;Remote Role: %s&quot;</span>), *Role);</span><br><span class="line">	<span class="built_in">SetDisplayText</span>(RemoteRoleString);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UFPlayerHUDWidget::NativeDestruct</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">RemoveFromParent</span>();</span><br><span class="line">	Super::<span class="built_in">NativeDestruct</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>GetRemoteRole</p>
<h2 id="主要API"><a href="#主要API" class="headerlink" title="主要API"></a>主要API</h2><h2 id="11-Camera"><a href="#11-Camera" class="headerlink" title="11.Camera"></a>11.Camera</h2><p><code>CreateDefaultSubobject</code> 是 Unreal Engine（UE）中用于创建组件或子对象的<strong>核心函数</strong>，主要在 C++ 中实现 Actor 或组件的初始化。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">T* <span class="built_in">CreateDefaultSubobject</span>&lt;TReturnType&gt;(FName SubobjectName, <span class="type">bool</span> bIsRequired = <span class="literal">true</span>, <span class="type">bool</span> bIsTransient = <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>**<code>TReturnType</code>**：需创建的组件类型（如 <code>USpringArmComponent</code>）。</li>
<li><code>SubobjectName</code>：组件唯一标识（同一 Actor 内不可重复）</li>
<li>**<code>bIsTransient</code>**：若为 <code>true</code>，组件不会被序列化（适用于临时对象）</li>
</ul>
<p><code>SetupAttachment</code> 是用于<strong>建立组件层级关系</strong>的核心方法，主要作用是将一个组件（子组件）附加到另一个组件（父组件）上，形成父子依赖关系。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">USceneComponent::SetupAttachment</span><span class="params">(USceneComponent* Parent, FName SocketName = NAME_None)</span></span>;</span><br></pre></td></tr></table></figure>



<h4 id="反射-UPROPERTY"><a href="#反射-UPROPERTY" class="headerlink" title="反射  - UPROPERTY"></a>反射  - UPROPERTY</h4><h1 id="Weapon"><a href="#Weapon" class="headerlink" title="Weapon"></a>Weapon</h1><p>这边开始以阅读源码方式去处理代码部分，可能涉及到下面课程的部分，但主要还是看引擎操作流程。</p>
<h2 id="1-Weapon-Class"><a href="#1-Weapon-Class" class="headerlink" title="1-Weapon Class"></a>1-Weapon Class</h2><ul>
<li><p>创建CPP FWeaponBase</p>
</li>
<li><p>编写代码</p>
<ul>
<li>代码内容为AFWeaponBase 的创建组件与网格<strong>碰撞</strong>（详见主要API 碰撞）的设置</li>
<li>创建组件如下的1.2，1.5-1.10</li>
<li>网格碰撞如下的3.1-3.4</li>
</ul>
</li>
<li><p>创建BP </p>
<ul>
<li>BP继承与FWeaponBase </li>
<li>设置Mesh</li>
</ul>
</li>
</ul>
<h2 id="碰撞"><a href="#碰撞" class="headerlink" title="碰撞"></a>碰撞</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_42673921/article/details/84070119">UE4 物理碰撞(C++)_setcollisionresponsetochannel-CSDN博客</a></p>
<table>
<thead>
<tr>
<th><strong><code>SetCollisionResponseToAllChannels(ECollisionResponse Response)</code></strong></th>
<th>设置组件对所有通道的统一响应</th>
<th><code>Response</code>: <code>Ignore</code>、<code>Overlap</code> 或 <code>Block</code></th>
<th>快速全局设置（如禁用所有碰撞）</th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>SetCollisionResponseToChannel(ECollisionChannel Channel, ECollisionResponse Response)</code></strong></td>
<td>设置组件对单个通道的响应</td>
<td><code>Channel</code>: 目标通道（如<code>ECC_WorldStatic</code>） <code>Response</code>: 响应类型</td>
<td>精细化控制（如角色忽略子弹通道）</td>
</tr>
<tr>
<td><strong><code>SetCollisionEnabled(ECollisionEnabled::Type Type)</code></strong></td>
<td>启用/禁用碰撞检测</td>
<td><code>Type</code>: <code>NoCollision</code>、<code>QueryOnly</code>（仅检测）、<code>PhysicsOnly</code>（仅物理）、<code>QueryAndPhysics</code></td>
<td>动态开关碰撞检测（如死亡后禁用）</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center"><strong>通道名称</strong></th>
<th align="center"><strong>枚举值</strong></th>
<th align="center"><strong>主要用途</strong></th>
<th align="center"><strong>典型应用场景</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>WorldStatic</strong></td>
<td align="center"><code>ECC_WorldStatic</code></td>
<td align="center">静态环境物体（不可移动）</td>
<td align="center">墙壁、地面、建筑物等场景静态元素的碰撞阻挡 。</td>
</tr>
<tr>
<td align="center"><strong>WorldDynamic</strong></td>
<td align="center"><code>ECC_WorldDynamic</code></td>
<td align="center">动态物体（可移动或受物理影响）</td>
<td align="center">可移动平台、可破坏物、开关门等动态交互对象 。</td>
</tr>
<tr>
<td align="center"><strong>Pawn</strong></td>
<td align="center"><code>ECC_Pawn</code></td>
<td align="center">玩家或AI控制的角色</td>
<td align="center">角色移动碰撞、AI视线检测、玩家与NPC的交互 。</td>
</tr>
<tr>
<td align="center"><strong>PhysicsBody</strong></td>
<td align="center"><code>ECC_PhysicsBody</code></td>
<td align="center">受物理模拟影响的物体</td>
<td align="center">滚石、箱子、布娃娃等物理驱动对象的碰撞检测 。</td>
</tr>
<tr>
<td align="center"><strong>Visibility</strong></td>
<td align="center"><code>ECC_Visibility</code></td>
<td align="center">可见性检测（非物理阻挡）</td>
<td align="center">光线追踪、玩家视线判断、渲染剔除优化 。</td>
</tr>
<tr>
<td align="center"><strong>Camera</strong></td>
<td align="center"><code>ECC_Camera</code></td>
<td align="center">摄像机碰撞检测</td>
<td align="center">防止摄像机穿墙、第三人称视角的镜头避障 。</td>
</tr>
<tr>
<td align="center"><strong>Destructible</strong></td>
<td align="center"><code>ECC_Destructible</code></td>
<td align="center">可破坏物体</td>
<td align="center">栅栏、玻璃、爆炸物等可破坏对象的碰撞响应 。</td>
</tr>
<tr>
<td align="center"><strong>Vehicle</strong></td>
<td align="center"><code>ECC_Vehicle</code></td>
<td align="center">载具类对象</td>
<td align="center">汽车、坦克、飞行器等载具的物理碰撞与交互 。</td>
</tr>
<tr>
<td align="center"><strong>Gameplay</strong></td>
<td align="center"><code>ECC_GameTraceChannelN</code></td>
<td align="center">预留的自定义游戏逻辑通道（<code>N=1~8</code>）</td>
<td align="center">武器检测（<code>Weapon</code>）、拾取物（<code>Pickup</code>）、陷阱触发等专属交互 。</td>
</tr>
</tbody></table>
<h2 id="2-Pickup-Widget"><a href="#2-Pickup-Widget" class="headerlink" title="2-Pickup Widget"></a>2-Pickup Widget</h2><ul>
<li><p>创建WBP Pickup </p>
</li>
<li><p>加入Text</p>
</li>
<li><p>编写代码 - 添加子物体</p>
<ul>
<li>创建WBP引用</li>
</ul>
</li>
<li><p>BP_Weapon中</p>
<ul>
<li>设置Pickup Widget<ul>
<li>Space-Screen</li>
<li>Widget Class - WBP Pickup</li>
<li>所需大小绘制-true</li>
</ul>
</li>
</ul>
</li>
<li><p>编写代码</p>
<ul>
<li><p>OnSphereOverlap 当有物体进入拾取区域时调用</p>
</li>
<li><p>必须是U函数 </p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">AFWeaponBase::OnSphereOverlap</span><span class="params">(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, UPrimitiveComponent* OtherComp, int32 OtherBodyIndex, <span class="type">bool</span> bFromSweep, <span class="type">const</span> FHitResult&amp; SweepResult)</span> </span></span><br></pre></td></tr></table></figure>

<ul>
<li>绑定事件<strong>委托</strong></li>
</ul>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AreaSphere-&gt;OnComponentBeginOverlap.<span class="built_in">AddDynamic</span>(<span class="keyword">this</span>, &amp;AFWeaponBase::OnSphereOverlap);  <span class="comment">// 3.5 绑定重叠开始事件</span></span><br><span class="line">AreaSphere-&gt;OnComponentEndOverlap.<span class="built_in">AddDynamic</span>(<span class="keyword">this</span>, &amp;AFWeaponBase::OnSphereEndOverlap);  <span class="comment">// 3.6 绑定重叠结束事件</span></span><br></pre></td></tr></table></figure>



<h3 id="委托"><a href="#委托" class="headerlink" title="委托"></a>委托</h3><p>[<a target="_blank" rel="noopener" href="https://blog.csdn.net/ZFSR05255134/article/details/119612832">UE4]委托代理：单播委托，多播委托，动态单播委托，动态多播委托，事件_ue 多播委托-CSDN博客</a></p>
<table>
<thead>
<tr>
<th align="center"><strong>特性</strong></th>
<th align="center"><strong>单播委托</strong></th>
<th align="center"><strong>多播委托</strong></th>
<th align="center"><strong>动态单播委托</strong></th>
<th align="center"><strong>动态多播委托</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>绑定数量</strong></td>
<td align="center">仅绑定 <strong>1个</strong> 函数</td>
<td align="center">可绑定 <strong>多个</strong> 函数</td>
<td align="center">仅绑定 <strong>1个</strong> 函数</td>
<td align="center">可绑定 <strong>多个</strong> 函数</td>
</tr>
<tr>
<td align="center"><strong>执行方式</strong></td>
<td align="center"><code>.Execute()</code></td>
<td align="center"><code>.Broadcast()</code></td>
<td align="center"><code>.Execute()</code></td>
<td align="center"><code>.Broadcast()</code></td>
</tr>
<tr>
<td align="center"><strong>蓝图支持</strong></td>
<td align="center">❌ 不支持蓝图绑定</td>
<td align="center">❌ 不支持蓝图绑定</td>
<td align="center">✅ 支持蓝图绑定（需<code>UFUNCTION</code>）</td>
<td align="center">✅ 支持蓝图绑定（需<code>UFUNCTION</code>）</td>
</tr>
<tr>
<td align="center"><strong>线程安全</strong></td>
<td align="center">非线程安全</td>
<td align="center">非线程安全</td>
<td align="center">非线程安全</td>
<td align="center">非线程安全</td>
</tr>
<tr>
<td align="center"><strong>声明宏</strong></td>
<td align="center"><code>DECLARE_DELEGATE[_Xxx]</code></td>
<td align="center"><code>DECLARE_MULTICAST_DELEGATE[_Xxx]</code></td>
<td align="center"><code>DECLARE_DYNAMIC_DELEGATE[_Xxx]</code></td>
<td align="center"><code>DECLARE_DYNAMIC_MULTICAST_DELEGATE[_Xxx]</code></td>
</tr>
<tr>
<td align="center"><strong>典型用例</strong></td>
<td align="center">一对一回调（如任务完成通知）</td>
<td align="center">事件广播（如伤害事件通知多个系统）</td>
<td align="center">蓝图与C++交互的单次回调</td>
<td align="center">蓝图可订阅的事件系统（如UI事件）</td>
</tr>
</tbody></table>
<h2 id="3-Variable-Replication"><a href="#3-Variable-Replication" class="headerlink" title="3- Variable Replication"></a>3- Variable Replication</h2><ul>
<li><p>复制变量设置</p>
<ul>
<li>在Character设置新变量为<strong>复制变量</strong>（详见主要API 复制变量）</li>
<li>重写 virtual void GetLifetimeReplicatedProps(TArray<FLifetimeProperty>&amp; OutLifetimeProps) const override;</li>
<li>这边<strong>TArray</strong>（详见主要API 数据容器）</li>
<li><strong>DOREPLIFETIME</strong></li>
</ul>
</li>
<li><p>内联宏 <strong>FORCEINLINE</strong>（详见主要API 内联宏）</p>
</li>
<li><p>DOREPLIFETIME_CONDITION(AFCharacter,OverlappingWeapon,COND_OwnerOnly)</p>
</li>
<li><p>复制时回调函数</p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UPROPERTY</span>(ReplicatedUsing = OnRep_OverlappingWeapon)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AFWeaponBase</span>* OverlappingWeapon;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UFUNCTION</span>()</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">OnRep_OverlappingWeapon</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>SetOverlappingWeapon</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">AFCharacter::SetOverlappingWeapon</span><span class="params">(AFWeaponBase* Weapon)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (OverlappingWeapon)</span><br><span class="line">    &#123;</span><br><span class="line">        OverlappingWeapon-&gt;<span class="built_in">ShowPickupWidget</span>(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    OverlappingWeapon = Weapon;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">IsLocallyControlled</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (OverlappingWeapon)</span><br><span class="line">        &#123;</span><br><span class="line">            OverlappingWeapon-&gt;<span class="built_in">ShowPickupWidget</span>(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这边使用了<strong>IsLocallyControlled</strong>()  </p>
<p>退出碰撞函数</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UFUNCTION</span>()</span><br><span class="line"> <span class="function"><span class="type">void</span> <span class="title">OnSphereEndOverlap</span><span class="params">(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, UPrimitiveComponent* OtherComp, int32 OtherBodyIndex)</span></span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>设置Rep回调函数多一个变量</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UFUNCTION</span>()</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">OnRep_OverlappingWeapon</span><span class="params">(AFWeaponBase* lastWeapon)</span></span>;</span><br></pre></td></tr></table></figure>

<p>注：这边lastWeapon 会有值（代表着被销毁的前一帧），但是OverlappingWeapon 可能为空，</p>
</li>
</ul>
<h3 id="网络复制"><a href="#网络复制" class="headerlink" title="网络复制"></a>网络复制</h3><p>在虚幻引擎（Unreal Engine）中，<code>UPROPERTY(Replicated)</code> 是一个核心宏，用于声明一个<strong>网络复制的属性</strong>。其作用是标记该变量（属性）的值需要从服务器（Server）自动同步到所有相关的客户端（Client），以实现多人游戏中状态的一致性。</p>
<h4 id="1-声明复制属性"><a href="#1-声明复制属性" class="headerlink" title="1. 声明复制属性"></a>1. <strong>声明复制属性</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UPROPERTY(Replicated)</span><br><span class="line">float Health;  // 生命值需从服务器同步到客户端</span><br></pre></td></tr></table></figure>

<h4 id="2-重写-GetLifetimeReplicatedProps-函数"><a href="#2-重写-GetLifetimeReplicatedProps-函数" class="headerlink" title="2. 重写 GetLifetimeReplicatedProps 函数"></a>2. <strong>重写 <code>GetLifetimeReplicatedProps</code> 函数</strong></h4><p>在属性所属的类中重写此函数，注册需复制的变量：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;Net/UnrealNetwork.h&quot;  // 必须包含此头文件</span><br><span class="line"></span><br><span class="line">void AMyActor::GetLifetimeReplicatedProps(TArray&lt;FLifetimeProperty&gt;&amp; OutLifetimeProps) const &#123;</span><br><span class="line">    Super::GetLifetimeReplicatedProps(OutLifetimeProps);</span><br><span class="line">    DOREPLIFETIME(AMyActor, Health);  // 注册Health为复制属性</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>DOREPLIFETIME</code> 宏是复制注册的关键。</li>
</ul>
<h4 id="3-启用Actor复制"><a href="#3-启用Actor复制" class="headerlink" title="3. 启用Actor复制"></a>3. <strong>启用Actor复制</strong></h4><p>在Actor的构造函数中设置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">AMyActor::AMyActor() &#123;</span><br><span class="line">    SetReplicates(true);  // 开启Actor的网络复制能力</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>该宏确保 <code>OverlappingWeapon</code>（角色当前重叠的武器对象）仅在特定条件下从服务器同步到客户端。通过 <code>COND_OwnerOnly</code> 条件，<strong>仅同步给控制该角色的客户端</strong>，其他客户端（如队友或敌人）不会收到此数据</p>
<p>**<code>ReplicatedUsing</code>**：指定同步后的回调函数为 <code>OnRep_OverlappingWeapon</code>，即属性值在客户端更新后自动触发此函数</p>
<h3 id="数据容器（代替STL）"><a href="#数据容器（代替STL）" class="headerlink" title="数据容器（代替STL）"></a>数据容器（代替STL）</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/ryacber/article/details/128758764">UE C++基础 | 常用数据容器 | TArray、TMap、TSet_emplace tmap-CSDN博客</a></p>
<h3 id="DOREPLIFETIME宏"><a href="#DOREPLIFETIME宏" class="headerlink" title="DOREPLIFETIME宏"></a>DOREPLIFETIME宏</h3><p>在虚幻引擎（Unreal Engine）中，<code>DOREPLIFETIME(AFCharacter, OverlappingWeapon)</code> 是一个核心宏，用于<strong>注册需要网络同步的属性</strong>，确保服务器上 <code>AFCharacter</code> 类中 <code>OverlappingWeapon</code> 变量的值能自动同步到所有客户端。以下是详细解析：</p>
<hr>
<h4 id="🔧-一、功能与作用"><a href="#🔧-一、功能与作用" class="headerlink" title="🔧 一、功能与作用"></a>🔧 <strong>一、功能与作用</strong></h4><ol>
<li><strong>网络同步机制</strong><ul>
<li>当服务器修改 <code>OverlappingWeapon</code>（如角色拾取武器）时，该宏会触发引擎自动将新值广播给所有客户端。</li>
<li>客户端收到数据后更新本地副本，无需手动处理同步逻辑，确保多人游戏中状态一致。</li>
</ul>
</li>
<li><strong>使用场景</strong><ul>
<li>适用于需跨客户端同步的 <code>Actor</code> 引用（如角色当前重叠的武器对象）。</li>
<li>典型案例：角色靠近武器时，客户端需实时显示武器可拾取提示。</li>
</ul>
</li>
</ol>
<hr>
<h4 id="⚙️-二、底层实现原理"><a href="#⚙️-二、底层实现原理" class="headerlink" title="⚙️ 二、底层实现原理"></a>⚙️ <strong>二、底层实现原理</strong></h4><ol>
<li><p><strong>依赖函数</strong><br> 该宏需在 <code>AFCharacter</code> 类的 <code>GetLifetimeReplicatedProps</code> 函数中调用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">void AFCharacter::GetLifetimeReplicatedProps(TArray&lt;FLifetimeProperty&gt;&amp; OutLifetimeProps) const &#123;</span><br><span class="line">    Super::GetLifetimeReplicatedProps(OutLifetimeProps);</span><br><span class="line">    DOREPLIFETIME(AFCharacter, OverlappingWeapon); // 注册同步属性</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>头文件要求</strong>：必须包含 <code>#include &quot;Net/UnrealNetwork.h&quot;</code>。</li>
</ul>
</li>
<li><p><strong>属性声明</strong><br> <code>OverlappingWeapon</code> 需用 <code>UPROPERTY(Replicated)</code> 标记为可复制属性：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UPROPERTY(Replicated)</span><br><span class="line">class AWeapon* OverlappingWeapon; // 声明为可复制引用</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Actor复制启用</strong><br> 在 <code>AFCharacter</code> 构造函数中需设置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">AFCharacter::AFCharacter() &#123;</span><br><span class="line">    SetReplicates(true); // 启用Actor的网络复制能力</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h4 id="📊-三、同步流程与数据流"><a href="#📊-三、同步流程与数据流" class="headerlink" title="📊 三、同步流程与数据流"></a>📊 <strong>三、同步流程与数据流</strong></h4><table>
<thead>
<tr>
<th><strong>步骤</strong></th>
<th><strong>服务器</strong></th>
<th><strong>客户端</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>属性修改</strong></td>
<td>调用 <code>SetOverlappingWeapon(NewWeapon)</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>检测变化</strong></td>
<td>引擎自动检测 <code>OverlappingWeapon</code> 变更</td>
<td>-</td>
</tr>
<tr>
<td><strong>广播更新</strong></td>
<td>发送新值给所有客户端</td>
<td>接收更新数据</td>
</tr>
<tr>
<td><strong>应用更新</strong></td>
<td>-</td>
<td>自动更新本地 <code>OverlappingWeapon</code> 值</td>
</tr>
</tbody></table>
<blockquote>
<p>⚠️ <strong>注意</strong>：客户端<strong>不能直接修改</strong> <code>Replicated</code> 属性，否则会与服务器值冲突。</p>
</blockquote>
<hr>
<h4 id="🛠️-四、高级用法"><a href="#🛠️-四、高级用法" class="headerlink" title="🛠️ 四、高级用法"></a>🛠️ <strong>四、高级用法</strong></h4><ol>
<li><p><strong>条件复制</strong><br> 通过 <code>DOREPLIFETIME_CONDITION</code> 限制同步范围，优化带宽：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DOREPLIFETIME_CONDITION(AFCharacter, OverlappingWeapon, COND_OwnerOnly);</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th><strong>条件类型</strong></th>
<th><strong>作用</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>COND_InitialOnly</code></td>
<td>仅首次同步时复制（如初始装备）</td>
</tr>
<tr>
<td><code>COND_OwnerOnly</code></td>
<td>仅同步给控制该角色的客户端</td>
</tr>
</tbody></table>
</li>
<li><p><strong>复制通知（RepNotify）</strong><br> 使用 <code>ReplicatedUsing</code> 在属性同步后触发客户端逻辑：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">UPROPERTY(ReplicatedUsing = OnRep_OverlappingWeapon)</span><br><span class="line">AWeapon* OverlappingWeapon;</span><br><span class="line"></span><br><span class="line">UFUNCTION()</span><br><span class="line">void OnRep_OverlappingWeapon() &#123;</span><br><span class="line">    if (OverlappingWeapon) ShowPickupWidget(true); // 显示拾取UI</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>客户端属性更新后自动调用 <code>OnRep_OverlappingWeapon</code>。</li>
</ul>
</li>
</ol>
<hr>
<h4 id="⚠️-五、常见问题与注意事项"><a href="#⚠️-五、常见问题与注意事项" class="headerlink" title="⚠️ 五、常见问题与注意事项"></a>⚠️ <strong>五、常见问题与注意事项</strong></h4><ol>
<li><p><strong>权限验证</strong><br> 修改复制属性的代码需在服务器执行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">void AFCharacter::SetNewWeapon(AWeapon* Weapon) &#123;</span><br><span class="line">    if (HasAuthority()) &#123; // 仅服务器可修改</span><br><span class="line">        OverlappingWeapon = Weapon;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>适用对象限制</strong></p>
<ul>
<li>仅继承自 <code>AActor</code> 的类支持属性复制（如 <code>AFCharacter</code>）。</li>
<li>非 <code>Actor</code> 类（如 <code>UObject</code>）需通过 RPC 或序列化同步。</li>
</ul>
</li>
<li><p><strong>性能优化</strong></p>
<ul>
<li>避免高频同步属性（如每帧更新的位置），优先使用内置组件（如 <code>CharacterMovementComponent</code>）。</li>
<li>对低频属性（如装备状态、交互对象）使用复制更高效。</li>
</ul>
</li>
</ol>
<hr>
<h4 id="💎-总结"><a href="#💎-总结" class="headerlink" title="💎 总结"></a>💎 <strong>总结</strong></h4><p><code>DOREPLIFETIME(AFCharacter, OverlappingWeapon)</code> 是虚幻引擎网络同步的核心机制，通过声明-注册模式实现属性自动同步。结合 <code>ReplicatedUsing</code> 可扩展客户端响应逻辑，而条件复制能进一步优化带宽。在多人游戏中，合理使用该宏可显著提升状态同步的效率和可靠性。</p>
<h3 id="IsLocallyControlled"><a href="#IsLocallyControlled" class="headerlink" title="IsLocallyControlled"></a>IsLocallyControlled</h3><p>在Unreal Engine的多人游戏开发中，类似 <code>IsLocallyControlled()</code> 的函数主要用于处理<strong>网络角色控制权、执行权限和同步逻辑</strong>的判断。以下是关键函数及其作用分类说明，结合了Unreal Engine的网络同步机制设计：</p>
<hr>
<h4 id="🔧-一、角色控制权与执行端判断"><a href="#🔧-一、角色控制权与执行端判断" class="headerlink" title="🔧 一、角色控制权与执行端判断"></a>🔧 一、角色控制权与执行端判断</h4><ol>
<li><p><strong><code>IsLocallyControlled()</code></strong></p>
<ul>
<li><strong>功能</strong>：判断当前角色是否由本地玩家控制（客户端视角）。</li>
<li><strong>典型场景</strong>：客户端特效播放、本地UI更新（如武器拾取提示）。</li>
</ul>
</li>
<li><p><strong><code>HasAuthority()</code></strong></p>
<ul>
<li><strong>功能</strong>：判断当前逻辑是否在服务端（Authority）执行。</li>
<li><strong>场景</strong>：关键状态修改（如生命值扣除）、生成网络同步对象（如武器掉落），确保仅服务端修改全局状态。</li>
</ul>
</li>
<li><p><strong><code>IsNetMode(ENetMode Mode)</code></strong></p>
<ul>
<li><p><strong>功能</strong>：检测当前网络模式（如客户端、服务端、独立运行）。</p>
</li>
<li><p>常用模式</p>
<p>：</p>
<ul>
<li><code>NM_Client</code>：当前为客户端。</li>
<li><code>NM_DedicatedServer</code>：专用服务器。</li>
<li><code>NM_ListenServer</code>：监听服务器（同时是主机客户端）。</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr>
<h4 id="📡-二、网络执行函数变体"><a href="#📡-二、网络执行函数变体" class="headerlink" title="📡 二、网络执行函数变体"></a>📡 二、网络执行函数变体</h4><ol>
<li><p><strong><code>GetWorld()-&gt;IsServer()</code> / <code>GetWorld()-&gt;IsClient()</code></strong></p>
<ul>
<li><strong>功能</strong>：直接判断当前运行环境是服务端或客户端，与 <code>HasAuthority()</code> 类似但更直观。</li>
</ul>
</li>
<li><p><strong><code>RunOnServer</code> (RPC函数限定符)</strong></p>
<ul>
<li><strong>功能</strong>：通过标记 <code>UFUNCTION(Server, Reliable)</code>，强制函数逻辑在服务端执行。</li>
<li><strong>场景</strong>：客户端发起攻击请求时，需服务端验证并广播同步。</li>
</ul>
</li>
<li><p><strong><code>Client</code> / <code>NetMulticast</code> RPC</strong></p>
<ul>
<li><p>功能</p>
<p>：从服务端向客户端广播事件：</p>
<ul>
<li><code>Client</code>：仅发送给控制该角色的客户端。</li>
<li><code>NetMulticast</code>：发送给所有客户端。</li>
</ul>
</li>
<li><p><strong>场景</strong>：播放全局特效（如爆炸）、更新多人UI。</p>
</li>
</ul>
</li>
</ol>
<hr>
<h4 id="⚙️-三、属性同步与响应函数"><a href="#⚙️-三、属性同步与响应函数" class="headerlink" title="⚙️ 三、属性同步与响应函数"></a>⚙️ 三、属性同步与响应函数</h4><ol>
<li><strong><code>OnRep_[PropertyName]()</code></strong><ul>
<li><strong>功能</strong>：属性标记为 <code>Replicated</code> 后，当属性在客户端同步时自动触发的回调函数。</li>
<li><strong>场景</strong>：客户端根据同步后的生命值更新血条UI。</li>
</ul>
</li>
<li><strong><code>GetNetMode()</code></strong><ul>
<li><strong>功能</strong>：返回当前网络模式枚举值（比 <code>IsNetMode</code> 更灵活），用于分支逻辑处理。</li>
</ul>
</li>
</ol>
<hr>
<h5 id="📊-关键函数对比表"><a href="#📊-关键函数对比表" class="headerlink" title="📊 关键函数对比表"></a>📊 关键函数对比表</h5><table>
<thead>
<tr>
<th><strong>函数/方法</strong></th>
<th><strong>判断目标</strong></th>
<th><strong>典型应用场景</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>IsLocallyControlled()</code></td>
<td>角色是否本地控制</td>
<td>本地UI显示、输入响应</td>
</tr>
<tr>
<td><code>HasAuthority()</code></td>
<td>是否在服务端执行</td>
<td>关键状态修改、生成同步对象</td>
</tr>
<tr>
<td><code>IsNetMode(NM_Client)</code></td>
<td>当前是否为客户端环境</td>
<td>环境适配逻辑（如禁用客户端物理）</td>
</tr>
<tr>
<td><code>OnRep_Health()</code></td>
<td>客户端属性同步完成</td>
<td>更新本地UI或播放特效</td>
</tr>
<tr>
<td><code>UFUNCTION(Server)</code></td>
<td>强制函数在服务端运行</td>
<td>客户端发起的动作请求（如拾取武器）</td>
</tr>
<tr>
<td><code>UFUNCTION(NetMulticast)</code></td>
<td>服务端向所有客户端广播</td>
<td>全局事件（如游戏开始通知）</td>
</tr>
</tbody></table>
<hr>
<h4 id="💡-四、组合使用示例"><a href="#💡-四、组合使用示例" class="headerlink" title="💡 四、组合使用示例"></a>💡 四、组合使用示例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">void AMyCharacter::TryPickupWeapon(AWeapon* Weapon) &#123;</span><br><span class="line">    // 客户端发起请求</span><br><span class="line">    if (IsLocallyControlled()) &#123;</span><br><span class="line">        Server_PickupWeapon(Weapon); // 调用Server RPC</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">UFUNCTION(Server, Reliable)</span><br><span class="line">void Server_PickupWeapon(AWeapon* Weapon) &#123;</span><br><span class="line">    // 服务端验证并执行</span><br><span class="line">    if (HasAuthority() &amp;&amp; Weapon) &#123;</span><br><span class="line">        Weapon-&gt;AttachToCharacter(this);</span><br><span class="line">        Multicast_PlayPickupFX(); // 广播特效</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">UFUNCTION(NetMulticast, Unreliable)</span><br><span class="line">void Multicast_PlayPickupFX() &#123;</span><br><span class="line">    // 所有客户端播放特效</span><br><span class="line">    SpawnPickupParticles();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此代码体现了以下设计原则：</p>
<ol>
<li>本地控制判断（<code>IsLocallyControlled</code>）触发客户端请求 →</li>
<li>服务端权限验证（<code>HasAuthority</code>）执行逻辑 →</li>
<li>广播事件（<code>NetMulticast</code>）同步到所有客户端。</li>
</ol>
<hr>
<h4 id="⚠️-注意事项"><a href="#⚠️-注意事项" class="headerlink" title="⚠️ 注意事项"></a>⚠️ 注意事项</h4><ol>
<li><strong>避免在客户端修改同步属性</strong>：所有需网络同步的属性修改必须通过服务端执行，否则会被引擎覆盖。</li>
<li><strong>RPC的可靠性选择</strong>：关键事件（如角色死亡）用 <code>Reliable RPC</code>；高频非关键事件（如位置微调）用 <code>Unreliable RPC</code>。</li>
<li><strong>网络优化</strong>：通过 <code>NetUpdateFrequency</code> 控制属性同步频率，平衡带宽与实时性需求。</li>
</ol>
<p>这些函数共同构成了Unreal Engine多人游戏开发的底层框架，理解其差异和适用场景是保证网络同步一致性与性能的关键。</p>
<h2 id="4-装备武器"><a href="#4-装备武器" class="headerlink" title="4 装备武器"></a>4 装备武器</h2></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">Fragmentary</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2025/07/17/0072-UeObj/">http://example.com/2025/07/17/0072-UeObj/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">零の領域</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/ue/">ue</a></div><div class="post_share"><div class="social-share" data-image="/img/p_66349124.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/07/27/0073-UeAPI/" title="UE常见API"><img class="cover" src="/img/p_66349124.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">UE常见API</div></div></a></div><div class="next-post pull-right"><a href="/2025/07/14/0071-U3dToUe/" title="unity2UE"><img class="cover" src="/img/p_66349124.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">unity2UE</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2025/07/27/0073-UeAPI/" title="UE常见API"><img class="cover" src="/img/p_66349124.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-27</div><div class="title">UE常见API</div></div></a></div><div><a href="/2025/07/14/0071-U3dToUe/" title="unity2UE"><img class="cover" src="/img/p_66349124.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-14</div><div class="title">unity2UE</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/./img/pixiv_cat.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Fragmentary</div><div class="author-info__description">一个摸鱼人的日常博客</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">73</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">33</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Fragmentary1002"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Fragmentary1002" target="_blank" title="Github"><i class="fa-brands fa-github-alt"></i></a><a class="social-icon" href="https://space.bilibili.com/165064718?spm_id_from=333.1007.0.0" target="_blank" title="bilibili"><i class="fa-solid fa-tv"></i></a><a class="social-icon" href="https://www.youtube.com/@mentaryFrag" target="_blank" title="youtube"><i class="fa-brands fa-youtube"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">这是一个博客~ 好吧这是我的学习笔记 一个Unity客户端开发者的日常</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6%E7%BC%96%E5%86%99%EF%BC%88%E5%BE%85%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">插件编写（待）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Play%E8%AE%BE%E7%BD%AE"><span class="toc-number">1.1.</span> <span class="toc-text">Play设置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.1.1.</span> <span class="toc-text">编译模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%BC%8F%EF%BC%88ENetMode%EF%BC%89"><span class="toc-number">1.1.2.</span> <span class="toc-text">网络模式（ENetMode）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E6%8F%92%E4%BB%B6%E4%BB%A3%E7%A0%81"><span class="toc-number">1.2.</span> <span class="toc-text">更新插件代码</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E7%A1%803C"><span class="toc-number">2.</span> <span class="toc-text">基础3C</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E5%BB%BA%E7%AB%8B"><span class="toc-number">2.1.</span> <span class="toc-text">项目建立</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%BA%E7%AB%8B%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5"><span class="toc-number">2.2.</span> <span class="toc-text">建立网络连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B5%84%E6%BA%90"><span class="toc-number">2.3.</span> <span class="toc-text">资源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3C"><span class="toc-number">2.4.</span> <span class="toc-text">3C</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Character"><span class="toc-number">2.4.1.</span> <span class="toc-text">Character</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Camera"><span class="toc-number">2.4.2.</span> <span class="toc-text">Camera</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Control"><span class="toc-number">2.4.3.</span> <span class="toc-text">Control</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Anim"><span class="toc-number">2.4.4.</span> <span class="toc-text">Anim</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%8A%A8%E7%94%BB%E6%89%8B%E6%84%9F%E4%B8%8E%E6%91%84%E5%83%8F%E6%9C%BA%E5%B0%8F%E4%BC%98%E5%8C%96"><span class="toc-number">2.4.5.</span> <span class="toc-text">修改动画手感与摄像机小优化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E7%94%B1%E6%91%84%E5%83%8F%E6%9C%BA%E8%A7%86%E8%A7%92"><span class="toc-number">2.4.5.1.</span> <span class="toc-text">自由摄像机视角</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%90%BDbug"><span class="toc-number">2.4.5.2.</span> <span class="toc-text">下落bug</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A0%E7%BC%9D%E5%88%87%E6%8D%A2"><span class="toc-number">2.5.</span> <span class="toc-text">无缝切换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#GameMode"><span class="toc-number">2.5.1.</span> <span class="toc-text">GameMode</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HUD"><span class="toc-number">2.6.</span> <span class="toc-text">HUD</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81API"><span class="toc-number">2.7.</span> <span class="toc-text">主要API</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-Camera"><span class="toc-number">2.8.</span> <span class="toc-text">11.Camera</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84-UPROPERTY"><span class="toc-number">2.8.0.1.</span> <span class="toc-text">反射  - UPROPERTY</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Weapon"><span class="toc-number">3.</span> <span class="toc-text">Weapon</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Weapon-Class"><span class="toc-number">3.1.</span> <span class="toc-text">1-Weapon Class</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A2%B0%E6%92%9E"><span class="toc-number">3.2.</span> <span class="toc-text">碰撞</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Pickup-Widget"><span class="toc-number">3.3.</span> <span class="toc-text">2-Pickup Widget</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A7%94%E6%89%98"><span class="toc-number">3.3.1.</span> <span class="toc-text">委托</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Variable-Replication"><span class="toc-number">3.4.</span> <span class="toc-text">3- Variable Replication</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%A4%8D%E5%88%B6"><span class="toc-number">3.4.1.</span> <span class="toc-text">网络复制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%A3%B0%E6%98%8E%E5%A4%8D%E5%88%B6%E5%B1%9E%E6%80%A7"><span class="toc-number">3.4.1.1.</span> <span class="toc-text">1. 声明复制属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E9%87%8D%E5%86%99-GetLifetimeReplicatedProps-%E5%87%BD%E6%95%B0"><span class="toc-number">3.4.1.2.</span> <span class="toc-text">2. 重写 GetLifetimeReplicatedProps 函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%90%AF%E7%94%A8Actor%E5%A4%8D%E5%88%B6"><span class="toc-number">3.4.1.3.</span> <span class="toc-text">3. 启用Actor复制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AE%B9%E5%99%A8%EF%BC%88%E4%BB%A3%E6%9B%BFSTL%EF%BC%89"><span class="toc-number">3.4.2.</span> <span class="toc-text">数据容器（代替STL）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DOREPLIFETIME%E5%AE%8F"><span class="toc-number">3.4.3.</span> <span class="toc-text">DOREPLIFETIME宏</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%94%A7-%E4%B8%80%E3%80%81%E5%8A%9F%E8%83%BD%E4%B8%8E%E4%BD%9C%E7%94%A8"><span class="toc-number">3.4.3.1.</span> <span class="toc-text">🔧 一、功能与作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%9A%99%EF%B8%8F-%E4%BA%8C%E3%80%81%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-number">3.4.3.2.</span> <span class="toc-text">⚙️ 二、底层实现原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%93%8A-%E4%B8%89%E3%80%81%E5%90%8C%E6%AD%A5%E6%B5%81%E7%A8%8B%E4%B8%8E%E6%95%B0%E6%8D%AE%E6%B5%81"><span class="toc-number">3.4.3.3.</span> <span class="toc-text">📊 三、同步流程与数据流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%9B%A0%EF%B8%8F-%E5%9B%9B%E3%80%81%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95"><span class="toc-number">3.4.3.4.</span> <span class="toc-text">🛠️ 四、高级用法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E4%BA%94%E3%80%81%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">3.4.3.5.</span> <span class="toc-text">⚠️ 五、常见问题与注意事项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%8E-%E6%80%BB%E7%BB%93"><span class="toc-number">3.4.3.6.</span> <span class="toc-text">💎 总结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IsLocallyControlled"><span class="toc-number">3.4.4.</span> <span class="toc-text">IsLocallyControlled</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%94%A7-%E4%B8%80%E3%80%81%E8%A7%92%E8%89%B2%E6%8E%A7%E5%88%B6%E6%9D%83%E4%B8%8E%E6%89%A7%E8%A1%8C%E7%AB%AF%E5%88%A4%E6%96%AD"><span class="toc-number">3.4.4.1.</span> <span class="toc-text">🔧 一、角色控制权与执行端判断</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%93%A1-%E4%BA%8C%E3%80%81%E7%BD%91%E7%BB%9C%E6%89%A7%E8%A1%8C%E5%87%BD%E6%95%B0%E5%8F%98%E4%BD%93"><span class="toc-number">3.4.4.2.</span> <span class="toc-text">📡 二、网络执行函数变体</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%9A%99%EF%B8%8F-%E4%B8%89%E3%80%81%E5%B1%9E%E6%80%A7%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%93%8D%E5%BA%94%E5%87%BD%E6%95%B0"><span class="toc-number">3.4.4.3.</span> <span class="toc-text">⚙️ 三、属性同步与响应函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%F0%9F%93%8A-%E5%85%B3%E9%94%AE%E5%87%BD%E6%95%B0%E5%AF%B9%E6%AF%94%E8%A1%A8"><span class="toc-number">3.4.4.3.1.</span> <span class="toc-text">📊 关键函数对比表</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E5%9B%9B%E3%80%81%E7%BB%84%E5%90%88%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.4.4.4.</span> <span class="toc-text">💡 四、组合使用示例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">3.4.4.5.</span> <span class="toc-text">⚠️ 注意事项</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E8%A3%85%E5%A4%87%E6%AD%A6%E5%99%A8"><span class="toc-number">3.5.</span> <span class="toc-text">4 装备武器</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/07/27/0073-UeAPI/" title="UE常见API"><img src="/img/p_66349124.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="UE常见API"/></a><div class="content"><a class="title" href="/2025/07/27/0073-UeAPI/" title="UE常见API">UE常见API</a><time datetime="2025-07-27T01:16:49.000Z" title="发表于 2025-07-27 09:16:49">2025-07-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/17/0072-UeObj/" title="unity2UE(正在更新)"><img src="/img/p_66349124.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="unity2UE(正在更新)"/></a><div class="content"><a class="title" href="/2025/07/17/0072-UeObj/" title="unity2UE(正在更新)">unity2UE(正在更新)</a><time datetime="2025-07-17T01:16:49.000Z" title="发表于 2025-07-17 09:16:49">2025-07-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/14/0071-U3dToUe/" title="unity2UE"><img src="/img/p_66349124.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="unity2UE"/></a><div class="content"><a class="title" href="/2025/07/14/0071-U3dToUe/" title="unity2UE">unity2UE</a><time datetime="2025-07-14T01:16:49.000Z" title="发表于 2025-07-14 09:16:49">2025-07-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/09/0070-lua5.4/" title="Lua 5.4 源码"><img src="/img/p_66349124.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Lua 5.4 源码"/></a><div class="content"><a class="title" href="/2025/07/09/0070-lua5.4/" title="Lua 5.4 源码">Lua 5.4 源码</a><time datetime="2025-07-09T01:16:49.000Z" title="发表于 2025-07-09 09:16:49">2025-07-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/17/0069-UeUMG/" title="UMG"><img src="/img/p_66349124.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="UMG"/></a><div class="content"><a class="title" href="/2025/06/17/0069-UeUMG/" title="UMG">UMG</a><time datetime="2025-06-17T01:16:49.000Z" title="发表于 2025-06-17 09:16:49">2025-06-17</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By Fragmentary</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>